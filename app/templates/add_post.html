<!-- extend from base layout -->
{% extends "base.html" %}

{% block head_css %}
    {{ super() }}
    <link rel=stylesheet type=text/css href= "{{ url_for('static', filename='css/simpleMDE/simplemde.min.css') }}">
{% endblock %}

{% block head_js %}
    {{ super() }}
    <script type="text/javascript" src="{{ url_for('static', filename='js/simpleMDE/simplemde.min.js') }}"></script>
{% endblock %}


{% block content %}

<script>
window.onload = function() {

    var simplemde = new SimpleMDE( {element: document.getElementById("blog_post_markdown") });

    {% if post is defined %}
        var post_data = {{ post | safe }};
        simplemde.value(post_data.body_markdown);
        $('#blog_post_title').val(post_data.title);
    {% endif %}


    $('#blog_post_title').val(post_data.title);
};
</script>


<form action="" method="post" id="add-post-form" name="add_post">
    {{form.hidden_tag()}}
    
    <h3>Post Title </h3>
    <input id="blog_post_title" name="blog_post_title" type="text"> </input>

    <h3>Post Content (Markdown) </h3>
    <textarea style="height=200px; width=300px;" id="blog_post_markdown" name="blog_post_markdown"></textarea>

    <!-- Depending on the status of the post (published/unpublished) show different buttons -->

    {% if post is defined and post.published %}
    <input type="submit" id="save-post" value="Updated Post">
    {% else %}
    <input type="submit" id="save-as-draft" value="Save as Draft"> <input type="submit" id="publish-post" value="Publish Post">
    {% endif %}

    <div style="margin-top: 20px;" id="return">
        <a  href="/admin/posts"> <i class="fa fa-chevron-circle-left" aria-hidden="true"></i> Return to Posts </a>
    </div>

</form>
{% endblock %}
